# The Uses of Composite Types

- 结构体和struct关键字
- 元组
- 字符串，魔法字母，字节型slice，字符串字面量
- 正则表达式
- 模式匹配
- switch语句
- strings包提供的能力
- 非常精确的圆周率计算
- 开发键值对数据库

## 结构体

### 结构体的指针

```go
/*
pointerStruct.go
*/
package main

import (
    "fmt"
)

type myStructure struct {
    Name string
    Surname string
    Height int32
}

func createStruct(n, s string, h int32) *myStructure {
    if h > 300 {
        h = 0
    }
    return &myStructure{n, s, h}
}

func retStructure(n, s string, h int32) myStructure {
    if h > 300 {
        h = 0
    }
    return myStructure{n, s, h}
}

func main() {
    s1 := createStruct("Mihalis", "Tsoukalos", 123)
    s2 := retStructure("Mihalis", "Tsoukalos", 123)
    fmt.Println((*s1).Name)
    fmt.Println(s2.Name)
    fmt.Println(s1)
    fmt.Println(s2)
}
```

运行结果如下：

```shell
$ go run pointerStruct.go
Mihalis
Mihalis
&{Mihalis Tsoukalos 123}
{Mihalis Tsoukalos 123}
```

### 使用关键字new

new关键字分配新对象，该对象是指针类型，是未初始化状态，即，不分配内存。

```go
pS := new(aStructure)
```

下面的语句使用new创建指向`nil`的slice

```go
sP := new([]aStructure)
```

## 元组 tuples

定义：严格的来说元组是一个包含多个有限的有序列表组成的

但是Go官方并不支持元组类型。

```go
/*
tuples.go
*/
package main

import (
    "fmt"
)

/* 该函数返回多个整数值 */
func retThree(x int) (int, int, int) {
    return 2 * x, x * x, -x
}

func main() {
    fmt.Println(retThree(10))
    n1, n2, n3 := retThree(20)
    fmt.Println(n1, n2, n3)
    n1, n2 = n2, n1
    fmt.Println(n1, n2, n3)
    x1, x2, x3 := n1*2, n1*n1, -n1　/* 元组可以像求值表达式那样无需临时值就可以交换变量　*/
    fmt.Println(x1, x2, x3)
}

```

执行结果如下：

```shell
$ go run tuples.go
20 100 -10
40 400 -20
400 40 -20
800 160000 -400
```

## 正则表达式和模式匹配

### 理论学习

有限机器(finite automaton):

识别器(recognizer)：

语法（grammar）：

### 简单示例

