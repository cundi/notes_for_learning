# 第二章 Go的内部机制

All the Go features that you learned in the previous chapter are extremely handy and you will be using them all the time. However, there is nothing as rewarding as being able to see and understand what is going on in the background and how Go operates behind the scenes.

In this chapter, you are going to learn about the Go garbage collector and the way it works. Additionally, you will find out how to call C code from your Go programs, which you might find indispensable in some situations. However, you will not need to use this capability too often because Go is a very capable programming language.

Furthermore, you will learn how to call Go code from your C programs, along with how to use the panic() and recover() functions and the defer keyword.

This chapter covers:

The Go compiler
How garbage collection works in Go
How to check the operation of the garbage collector
Calling C code from your Go code
Calling Go code from a C program
The panic() and recover() functions
The unsafe package
The handy, yet tricky, defer keyword
The strace(1) Linux utility
The dtrace(1) utility, which can be found in FreeBSD systems, including macOS Mojave
Finding out information about your Go environment
The node trees created by Go
Creating WebAssembly code from Go
The Go assembler

本章学习以下内容：

- Go编译器
- Go的垃圾回收是如何工作的
- 如何检查垃圾回收器的操作
- 在Go代码中调用C代码
- 在C程序中调用Go代码
- 函数`panic()`和`recover()`
- `unsafe`包
- 方便且具有技巧性的`defer`关键字
- Linux工具`strace(1)`
- FreeBSD和MacOS中的工具`dstrace(1)`
- Go环境变量的更多内容
- Go所创建的node tree
- 用Go创建WebAssembly代码
- Go的汇编器

